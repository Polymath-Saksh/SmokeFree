<!-- cravings/log_craving.html -->
{% extends "base.html" %}
{% block content %}
{% load crispy_forms_tags %}
<h2>Log a Craving</h2>
<form method="post" id="craving-form">
	{% csrf_token %}
	{{ form.as_p }}
	<button type="submit" class="btn btn-primary">Log Craving</button>
</form>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		// Get location when form loads
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(function (position) {
				document.getElementById('id_latitude').value = position.coords.latitude;
				document.getElementById('id_longitude').value = position.coords.longitude;
			}, function (error) {
				console.error("Error getting location:", error);
				// Set default values or handle error
				document.getElementById('id_latitude').value = 0.0;
				document.getElementById('id_longitude').value = 0.0;
			});
		} else {
			console.warn("Geolocation is not supported by this browser");
			document.getElementById('id_latitude').value = 0.0;
			document.getElementById('id_longitude').value = 0.0;
		}
	});
</script>
{% endblock %}